# 0. Controller类中获取载荷的各种方法

Controller接收参数的常用方式总体可以分为三类。第一类是Get请求通过拼接url进行传递，第二类是Post请求通过请求体进行传递，第三类是通过请求头部进行参数传递。

 **1 @PathVariable接收参数**

请求方式：localhost:7001/param/123

请求示例：

![img](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/6wgi0ghv4k.png)

```java
@GetMapping("{id}")
public String getPathVariable(@PathVariable String id){
    return "id="+id;
}
```



**2 @RequestParam接收参数**

使用这个注解需要注意两个点，一是加了这个参数后则请求中必须传递这个参数，二是@**RequestParam**这个注解可以指定名字，请求参数必须和指定的这个名字相同，如果不指定，则默认为具体参数名。

请求方式：localhost:7001/param/getParam?myId=18

请求示例：

![](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/0mze02t4m0.png)

```java
@GetMapping("getParam")
public String getRequestParam(@RequestParam("myId") String id){
    return "id="+id;
}
```



**3 无注解传参**

这种方式和2对比，最大的区别就是这个参数不是必传的，请求路径上可以不传递。

请求方式：localhost:7001/param/getString?id=18

请求示例：

![img](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/117eohu7zr.png)

```java
@GetMapping("getString")
public String getString(String id){
    return "id="+id;
}
```



**4 HttpServletRequest接收参数**

请求方式：localhost:7001/param/getRequest?id=18

请求示例：

![img](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/7g5aiymrs3.png)

```java
@GetMapping("getRequest")
public String getRequest(HttpServletRequest request){
    String id = request.getParameter("id");
    return "id="+id;
}
```



**5 @RequestBody接收请求体参数**

这种方式一般用来传递实体对象，加了这个注解后，参数也是必传的。

请求方式：{"id":18}

请求示例：

![img](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/1strm1mic1.png)

```java
@PostMapping("getBody")
public String getBody(@RequestBody String id){
    return "id="+id;
}
```



**6 @RequestHeader接收请求头参数**

请求示例：

![img](https://ask.qcloudimg.com/raw/yehe-4fac7fe57135/a7hh8ta0w1.png)

```java
@PostMapping("getHeader")
public String getHeader(@RequestHeader String id){
    return "id="+id;
}
```

# 0.1 技术栈、功能架构

![image-20240312093853422](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240312093853422.png)

![image-20240312094002950](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240312094002950.png)

![image-20240312094135409](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240312094135409.png)

# 1. 2024/3/12 --> 新建项目

## 1.1 数据库创建

![image-20240312095737099](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240312095737099.png)

![image-20240312101045603](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240312101045603.png)



## 1.2 登录功能

![image-20240313093805162](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313093805162.png)

```java
@Slf4j
@RestController
@RequestMapping("/employee")
public class EmployeeController {
    @Autowired
    private EmployeeService employeeService;

    /**
     * 员工登录
     * @param request
     * @param employee
     * @return
     */
    @PostMapping("/login")
    public R<Employee> login(HttpServletRequest request, @RequestBody Employee employee){
        //1.将页面提交的密码进行md5加密
        String password = employee.getPassword();
        password = DigestUtils.md5Hex(password);

        //2.根据页面提交的username查询数据库
        LambdaQueryWrapper<Employee> lambdaQueryWrapper = new LambdaQueryWrapper<>();
        lambdaQueryWrapper.eq(Employee::getUsername, employee.getUsername());
        Employee employee1 = employeeService.getOne(lambdaQueryWrapper);

        //3.查询是否存在此用户名
        if(employee1 != null) {
            return R.error("无此用户名，登录失败");
        }

        //4.比对密码
        if(!employee1.getPassword().equals(password)){
            return R.error("密码不正确，登录失败");
        }

        //5.查看员工状态，若禁用则返回员工禁用结果
        if(employee1.getStatus() == 0){
            return R.error("员工已禁用，登录失败");
        }

        //6.登录成功，将员工信息返回给前端
        request.getSession().setAttribute("employ",employee1.getId());
        return R.success(employee1);

    }
}
```

因为前端传回的访问方式是Post所以用 @PostMapping

传回的为json格式，所以要用@RequestBody进行封装



## 1.3 退出功能

![image-20240313104041196](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313104041196.png)



# 2. 2024/3/13 and 14 --> 员工管理

需求分析：

![image-20240313110556676](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313110556676.png)

![image-20240313110629945](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313110629945.png)

![image-20240313110959394](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313110959394.png)

## 2.1 登录功能增加过滤器

![image-20240313111202973](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313111202973.png)

![image-20240313111800941](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313111800941.png)

## 2.2 新增员工

![image-20240313143405189](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313143405189.png)

![image-20240313143501712](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313143501712.png)

![image-20240313143935399](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313143935399.png)

![image-20240313161827585](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313161827585.png)

采用全局异常捕获



## 2.3 员工信息分页查询

![image-20240313164910491](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313164910491.png)

![image-20240313165230133](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240313165230133.png)

可以使用mp的分页插件简化开发

```java
/**
 * 配置分页插件
 */
@Configuration
public class MybatisPlusConfig {
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor mybatisPlusInterceptor = new MybatisPlusInterceptor();
        mybatisPlusInterceptor.addInnerInterceptor(new PaginationInnerInterceptor());
        return mybatisPlusInterceptor;
    }
}
```



## 2.4 启用/禁用员工账号

前端实现：只有admin用户可以看到禁用启用按钮

![image-20240314102457665](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314102457665.png)

![image-20240314102906846](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314102906846.png)



![image-20240314103422172](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314103422172.png)

![image-20240314104916207](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314104916207.png)

![image-20240314105236867](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314105236867.png)

![image-20240314105236867](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314105312873.png)



## 2.5 员工信息编辑

![image-20240314135108926](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314135108926.png)

![image-20240314135117622](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314135117622.png)



# 3. 2024/3/14 --> 分类管理（菜品、套餐）

![image-20240314141105057](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314141105057.png)

## 3.1 公共字段自动填充

![image-20240314141307515](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314141307515.png)

![image-20240314141502472](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314141502472.png)

![image-20240314141840140](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314141840140.png)

![image-20240314141900926](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314141900926.png)

![image-20240314143140544](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314143140544.png)

![image-20240314143220567](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314143220567.png)

![image-20240314143930422](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314143930422.png)

![image-20240314144250976](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314144250976.png)



## 3.2 新增分类

![image-20240314151537366](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314151537366.png)

![image-20240314151627988](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314151627988.png)

![image-20240314151858440](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314151858440.png)

![image-20240314151930944](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314151930944.png)

![image-20240314152812297](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314152812297.png)



## 3.3删除分类

![image-20240314155902718](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314155902718.png)

![image-20240314161215520](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314161215520.png)



## 3.4 修改分类

![image-20240314165537368](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314165537368.png)



# 4. 2024/3/15 菜品管理

![image-20240314171601548](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314171601548.png)

![image-20240314171613873](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314171613873.png)

![image-20240314171628273](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240314171628273.png)



## 4.0 起售、停售、删除



## 4.1 文件上传下载

![image-20240315090437203](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315090437203.png)

![image-20240315090613232](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315090613232.png)

![image-20240315090720497](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315090720497.png)

![image-20240315090848205](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315090848205.png)

![image-20240315095441144](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315095441144.png)



## 4.2 新增菜品

![image-20240315101912377](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315101912377.png)

![image-20240315101935170](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315101935170.png)

![image-20240315102437901](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315102437901.png)

![image-20240315103333962](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315103333962.png)

![image-20240315105245982](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315105245982.png)



## 4.3 分页查询

![image-20240315141430222](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315141430222.png)

![image-20240315141615650](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315141615650.png)



## 4.4 修改菜品

![image-20240315153128449](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315153128449.png)

![image-20240315153151017](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240315153151017.png)



# 5. 2024/3/19 套餐管理

## 5.0 起售、停售

## 5.1 新增套餐

![image-20240319092119205](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319092119205.png)



## 5.2 套餐分页查询

![image-20240319095709274](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319095709274.png)

![image-20240319095724838](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319095724838.png)



## 5.3 套餐删除

![image-20240319103146854](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319103146854.png)

![image-20240319103211950](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319103211950.png)



## 5.4 套餐修改

同4.4



# 6. 2024/3/19 用户地址簿管理

![image-20240319144856781](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319144856781.png)

![image-20240319144935916](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319144935916.png)



# 7. 2024/3/20 手机验证码登录

![image-20240319141951147](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319141951147.png)



## 7.1 短信发送

![image-20240319142422588](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319142422588.png)

![image-20240320092245277](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240320092245277.png)

![image-20240320092326196](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240320092326196.png)

![image-20240320092815626](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240320092815626.png)

![image-20240320092821549](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240320092821549.png)



# 8. 2024/3/20 移动端菜品展示、购物车、下单

![image-20240319144702700](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319144702700.png)

![image-20240319144846017](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240319144846017.png)



## 8.1 菜品展示

![image-20240320145830136](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240320145830136.png)
